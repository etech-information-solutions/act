@model CustomSearchModel

@using ACT.Core.Models;

@{
    ViewBag.ViewName = "_ReconcileInvoice";
}

<div class="graph-search grouped-area" style="margin-left: -10px; margin-right: -10px; margin-top: -10px; border: 0; border-bottom: 20px solid #f5f5f5; margin-bottom: 0;">

    <b class="title">
        Custom Search:
        <span id="rl-loader"></span>
    </b>

    <div class="dashboard-search" style="margin-top: 10px;">

        <span>
            <label for="ClientId">Client:</label>
        </span>

        <span>
            <label for="LoadDateFrom">Load Date From:</label>
        </span>

        <span>
            <label for="LoadDateTo">To:</label>
        </span>

    </div>

    <div id="rl-search-fields" class="dashboard-search">

        <span>
            @Html.DropDownListFor( model => model.ClientId, model => model.ClientOptions, c => c.Key, c => c.Value, true, new { @class = "chzn", @style = "width: 98%;" } )
        </span>

        <span>
            @Html.TextBoxFor( model => model.FromDate, new { @class = "date-picker", @style = "width: 92%; height: 25px; position: relative; bottom: -6px;", @placeholder = "              /              /" } )
        </span>

        <span>
            @Html.TextBoxFor( model => model.ToDate, new { @class = "date-picker", @style = "width: 92%; height: 25px; position: relative; bottom: -6px;", @placeholder = "              /              /" } )
        </span>

    </div>

    <a class="do-search" rel="tipsyE" title="Filter loads to reconcile?" data-reconcile-invoices-search="1" data-target="#rl-search-fields" data-invoices="#invoices" data-client-loads="#invoice-client-loads">
        SEARCH
    </a>

</div>

@Html.Partial( "_Notification" )

<p style="padding: 10px 0; border-bottom: 1px solid #ddd;">
    @Html.ActionLink( "Add", "AddInvoice", new { }, new { @class = "add", @rel = "tipsyS", @title = "Add a new invoice?", @data_edit = "1", @data_id = 0, @data_target = "#reconcileinvoices" } )

    <span style="padding: 0 5px;">|</span>

    @Html.ActionLink( "Import", "ImportInvoices", new { }, new { @class = "csv", @rel = "tipsyS", @title = "Import new invoices?", @data_edit = "1", @data_id = 0, @data_target = "#reconcileinvoices" } )

    <span class="loader"></span>
</p>

<p style="margin: 15px 0; font-weight: bold;">
    <img alt="Tip" src="@Url.Content("~/Images/info.png")" style="margin-right: 5px;" />
    Drag an invoice and drop it on a matching client load to reconcile...
</p>

<div id="invoices" class="left" style="width: 52%; margin-right: 1%;">

    <div style="padding: 10px; border: 1px solid #cacaca; text-transform: uppercase; position: relative; background: #eee; border-bottom: 0; border-top-left-radius: 4px; border-top-right-radius: 4px;">

        <div class="left" style="margin-top: 8px;">
            Invoices <span id="loader"></span>
        </div>

        <div class="right" style="position: relative; width: 45%;">

            @Html.TextBoxFor( model => model.Query, new { @class = "input", @style = "", @placeholder = "Enter any search text..." } )

            <a onclick="ACT.UI.DataSearchInvoices( $( '#invoices' ) );" rel="tipsyE" title="Click to filter Invoices..." data-pad-search="1" data-target="#invoices-data" style="position: absolute; right: 2px; top: -2px; background: #012d71; padding: 7px 5px; border-bottom-left-radius: 4px;">
                <img alt="Search" src="@Url.Content( "~/Images/search.png" )" style="height: 20px;" />
            </a>

        </div>

        <div class="clear"></div>
    </div>

    <div id="invoices-data" class="list-data">

        @Html.Partial( "_Invoices", ( PagingExtension ) ViewBag.Invoices )

    </div>

</div>

<div id="invoice-client-loads" class="right" style="width: 46%;">

    <div style="padding: 10px; border: 1px solid #cacaca; text-transform: uppercase; position: relative; background: #eee; border-bottom: 0; border-top-left-radius: 4px; border-top-right-radius: 4px;">

        <div class="left" style="margin-top: 8px;">
            Client Loads <span id="loader"></span>
        </div>

        <div class="right" style="position: relative; width: 45%;">

            @Html.TextBoxFor( model => model.Query, new { @class = "input", @style = "", @placeholder = "Enter any search text..." } )

            <a onclick="ACT.UI.DataSearchInvoiceClientLoads( $( '#invoice-client-loads' ) );" rel="tipsyE" title="Click to filter Client Loads..." data-cl-search="1" data-target="#invoice-client-loads-data" style="position: absolute; right: 0px; top: -2px; background: #012d71; padding: 7px 5px; border-bottom-left-radius: 4px;">
                <img alt="Search" src="@Url.Content( "~/Images/search.png" )" style="height: 20px;" />
            </a>

        </div>

        <div class="clear"></div>
    </div>

    <div id="invoice-client-loads-data" class="list-data">

        @Html.Partial( "_InvoiceClientLoads", ( PagingExtension ) ViewBag.InvoiceClientLoads )

    </div>

</div>

<div class="clear">&nbsp;</div>