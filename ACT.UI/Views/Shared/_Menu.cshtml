@using ACT.Core.Enums;
@using ACT.Data.Models; 
@using ACT.Core.Models; 

@{
        string controller = ViewContext.RouteData.Values[ "controller" ].ToString();

        Client client = ( ViewBag.SelectedClient != null ) ? ViewBag.SelectedClient : new Client() { CompanyName = "N/A" };

        //UserModel user = ( Request.IsAuthenticated && ViewBag.CurrentUser != null ) ? ( UserModel ) ViewBag.CurrentUser : User.Get();

        //string sessClient = ( HttpContext.Current.Session[ "ClientId" ] != null ? HttpContext.Current.Session[ "ClientId" ].ToString() : "0" );
    }

<div class="menu">
    <ul>

        <li class="logz">
            <a href="@Url.Action( "Index", "DashBoard" )">
                <img alt="ACT Pallet Solutions" src="@Url.Content( "~/images/act-logo.png" )" style="width: 100%;" />
            </a>
        </li>

        @*<li class="welcome">
            Welcome <strong>@user.Name</strong>
        </li>*@
        <li class="welcome" style="font-size: 14px; color: #333;">
            Selected Client:

            <span id="sc-m" class="block" style="border-top: 1px dashed #fff; padding-top: 3px; margin-top: 3px; color: #012d71;">
                @(client?.CompanyName)
            </span>
        </li>
        @*@if ( User.Has( PermissionTo.View, PermissionContext.Client ) )
        {
            <li class="welcome">
                Select Client
                <select id="ClientListAdmin" name="ClientListAdmin"></select>
                <br />
                <br />
            </li>
        }*@

        @if ( User.Has( PermissionTo.View, PermissionContext.DashBoard ) )
        {
            <li class="@(controller.ToLower().Equals( "dashboard" ) ? "current" : "")" data-hot-spot="1" data-c="DashBoard" data-t="">
                <a rel="tipsyW" title="DashBoard" href="@Url.Action( "Index", "DashBoard" )">
                    <span>Dashboard</span>
                </a>
            </li>
        }

        @if ( User.Has( PermissionTo.View, PermissionContext.Client ) )
        {
            <li data-hot-spot="1" data-c="Client" data-t="" class="@(controller.ToLower().Equals( "client" ) ? "current" : "")">
                <a rel="tipsyW" title="Clients" href="@Url.Action( "Index", "Client" )">
                    <span>Client Management</span>
                </a>
            </li>
        }

        @if ( User.Has( PermissionTo.View, PermissionContext.Client ) )
        {
            <li class="first @(controller.ToLower().Equals( "clientreporting" ) ? "current" : "")" data-hot-spot="1" data-c="ClientReporting" data-t="">
                <a rel="tipsyW" title="Client Reporting" href="@Url.Action( "Index", "ClientReporting" )">
                    <span>Client Reporting</span>
                </a>
            </li>
        }

        @if ( User.Has( PermissionTo.View, PermissionContext.Pallet ) )
        {
            <li data-hot-spot="1" data-c="Pallet" data-t="" class="@(controller.ToLower().Equals( "pallet" ) ? "current" : "")">
                <a rel="tipsyW" title="Pallets" href="@Url.Action( "Index", "Pallet" )">
                    <span>Pallet Management</span>
                </a>
            </li>
        }

        @if ( User.Has( PermissionTo.View, PermissionContext.Administration ) )
        {
            <li data-hot-spot="1" data-c="SystemAdministration" data-t="" class="@(controller.ToLower().Equals( "administration" ) ? "current" : "")">
                <a rel="tipsyW" title="Administration" href="@Url.Action( "Index", "Administration" )">
                    <span>Administration</span>
                </a>
            </li>
        }

        @if ( User.Has( PermissionTo.View, PermissionContext.Finance ) )
        {
            <li data-hot-spot="1" data-c="Finance" data-t="" class="@(controller.ToLower().Equals( "finance" ) ? "current" : "")">
                <a rel="tipsyW" title="Finance" href="@Url.Action( "Index", "Finance" )">
                    <span>Finance</span>
                </a>
            </li>
        }

        @if ( User.Has( PermissionTo.View, PermissionContext.Transporter ) )
        {
            <li data-hot-spot="1" data-c="Transporter" data-t="" class="@(controller.ToLower().Equals( "transporter" ) ? "current" : "")">
                <a rel="tipsyW" title="Transporter" href="@Url.Action( "Index", "Transporter" )">
                    <span>Transporter</span>
                </a>
            </li>
        }

        <li style="border-top: 5px solid #f5f5f5; border-bottom: 5px solid #f5f5f5; margin-top: 5px;">
            <a class="red-bg" href="@Url.Action( "LogOff", "Account" )" style="padding: 10px 20px;">
                LOGOUT
            </a>
        </li>

    </ul>

    <div class="clear"></div>

</div>
