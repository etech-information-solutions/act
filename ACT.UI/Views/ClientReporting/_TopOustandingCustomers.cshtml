
@model PagingExtension

@using ACT.Core.Models;

@{
    ViewBag.ShowExport = true;
    ViewBag.ShowCustom = true;
    ViewBag.ViewName = "_TopOustandingCustomers";
}


@Html.Partial( "_Notification" )

@{
    int count = Model.Start;
    List<OutstandingPalletsModel> items = ( List<OutstandingPalletsModel> ) Model.Items;
}

@if ( Model == null || !items.Any() )
{
    <div class="notification message-warn" style="margin-bottom: 20px;">
        There are no records available matching your search criteria.
    </div>
}

<table id="TopOustandingCustomers-table" class="da-table datatable-numberpaging sort fixed-header" data-fixed-header-target="#TopOustandingCustomers-table_wrapper" data-starting-point=".ap-tabs ul">

    <thead>
        <tr>
            <th data-name="Count">
                #
            </th>
            <th data-name="Client">
                Client
            </th>
            <th data-name="Region">
                Region
            </th>
            <th data-name="Site">
                Site
            </th>
            <th data-name="Reason">
                Reason
            </th>
            <th data-name="Total">
                Total
            </th>
        </tr>
    </thead>

    <tbody>
        @if ( Model != null && items != null && items.Count() > 0 )
        {
            foreach ( OutstandingPalletsModel item in items )
            {
                <tr>
                    <td width="1%" style="background-color: #012d71; color: #fff;">
                        @count
                    </td>
                    <td width="18%" style="border-left: 0 none; background-color: #012d71; color: #fff; font-weight: bold;">
                        @item.ClientLoad.ClientName
                    </td>
                    <td style="border-left: 0 none; background-color: #012d71;">
                        &nbsp;
                    </td>
                    <td style="border-left: 0 none; background-color: #012d71;">
                        &nbsp;
                    </td>
                    <td style="border-left: 0 none; background-color: #012d71;">
                        &nbsp;
                    </td>
                    <td style="border-left: 0 none; background-color: #012d71; color: #fff; font-weight: bold; width: 10%;">
                        @item.Total
                    </td>
                </tr>

                foreach ( OutstandingRegionModel r in item.Regions )
                {
                    <tr>
                        <td width="1%" style="border-left: 0 none; background-color: #e1f9f9;">
                            &nbsp;
                        </td>
                        <td style="border-left: 0 none; background-color: #e1f9f9;">
                            &nbsp;
                        </td>
                        <td width="20%" style="border-left: 0 none; background-color: #e1f9f9;">
                            @(r.Name ?? "--NA--")
                        </td>
                        <td style="border-left: 0 none; background-color: #e1f9f9;">
                            &nbsp;
                        </td>
                        <td style="border-left: 0 none; background-color: #e1f9f9;">
                            &nbsp;
                        </td>

                        <td width="8%" style="border-left: 0 none; background-color: #e1f9f9;">
                            @r.Total
                        </td>

                    </tr>

                    foreach ( OutstandingSiteModel s in r.Sites )
                    {
                        <tr>
                            <td width="1%" style="border-left: 0 none; background-color: #f3f9e2;">
                                &nbsp;
                            </td>
                            <td style="border-left: 0 none; background-color: #f3f9e2;">
                                &nbsp;
                            </td>
                            <td style="border-left: 0 none; background-color: #f3f9e2;">
                                &nbsp;
                            </td>
                            <td width="20%" style="border-left: 0 none; background-color: #f3f9e2;">
                                @(s.Name ?? "--NA--")
                            </td>
                            <td style="border-left: 0 none; background-color: #f3f9e2;">
                                &nbsp;
                            </td>

                            <td width="8%" style="border-left: 0 none; background-color: #f3f9e2;">
                                @s.Total
                            </td>

                        </tr>

                        foreach ( OutstandingReasonModel o in s.OutstandingReasons )
                        {
                            <tr>
                                <td width="1%" style="border-left: 0 none; background-color: #efe2fa;">
                                    &nbsp;
                                </td>
                                <td style="border-left: 0 none; background-color: #efe2fa;">
                                    &nbsp;
                                </td>
                                <td style="border-left: 0 none; background-color: #efe2fa;">
                                    &nbsp;
                                </td>
                                <td style="border-left: 0 none; background-color: #efe2fa;">
                                    &nbsp;
                                </td>
                                <td style="border-left: 0 none; background-color: #efe2fa;">
                                    @(o.Description ?? "--NA--")
                                </td>

                                <td width="8%" style="border-left: 0 none; background-color: #efe2fa;">
                                    @o.Total
                                </td>

                            </tr>
                        }
                    }
                }

                <tr>
                    <td width="1%" style="background-color: #012d71; color: #fff;">
                        &nbsp;
                    </td>
                    <td style="border-left: 0 none; background-color: #012d71;">
                        &nbsp;
                    </td>
                    <td style="border-left: 0 none; background-color: #012d71;">
                        &nbsp;
                    </td>
                    <td style="border-left: 0 none; background-color: #012d71;">
                        &nbsp;
                    </td>
                    <td style="border-left: 0 none; background-color: #012d71;">
                        &nbsp;
                    </td>
                    <td style="border-left: 0 none; background-color: #012d71; color: #fff; font-weight: bold; width: 10%;">
                        @item.Total
                    </td>
                </tr>

                count++;
            }
        }
    </tbody>

</table>

@*@Html.Partial( "_TopOustandingCustomersCustomSearch", new ACT.Core.Models.CustomSearchModel() )*@

@Html.Partial( "_Paging" )