@model Client

@using ACT.Data.Models;

@{ 
    List<ClientInvoice> invoices = Model.ClientLoads.SelectMany( s => s.ClientInvoices ).ToList();
}


<div id="item-details" class="item-details" style="width: auto;">

    <h2>
        <img alt="" src="@Url.Content( "~/images/info.png" )" />
        <span>Client Invoices @(invoices?.Count)</span>
    </h2>

    <ul class="list">
        @foreach ( Invoice item in invoices.Select(s=>s.Invoice) )
        {
            <li>
                <a data-quick-link="1" data-target="#invoices" data-id="@item.Id">
                    Invoie #: @item.Number<br />
                    Load #: @item.LoadNumber<br />
                    Invoie Date: @item.Date<br />

                    <div class="clear" style="border-bottom: 1px dashed #ccc; margin-bottom: 5px;">&nbsp;</div>

                    Invoie Quantity: @item.Quantity<br />
                    Invoie Amount: @(item.Amount?.ToString( "C", System.Globalization.CultureInfo.CreateSpecificCulture( "en-ZA" ) ))
                </a>
            </li>
        }
    </ul>

    <div class="clear" style="border-bottom: 1px dashed #ccc; margin-bottom: 20px;">&nbsp;</div>

    @if ( ViewBag.IncludeLayout == null )
    {
        <p>
            @Html.ActionLink( "Edit", "EditPSP", new { id = Model.Id }, new { @class = "edit", @data_edit = "1", @data_id = Model.Id, @data_target = "#tr-" + Model.Id + "-item" } )

            @if ( ViewBag.IncludeLayout == null )
            {
                <span style="padding: 0 5px;">/</span>
                <a data-cancel="1" data-target="#item-details" data-remove="tr.edit">Close</a>
            }
        </p>
    }

    @if ( ViewBag.IncludeLayout != null )
    {
        <div class="back-to-list">
            @Html.ActionLink( "Back to List", "Index" )
        </div>
    }

</div>
